$(document).ready(function(){function e(e){var t=new fabric.Line(e,{strokeWidth:5,stroke:"#7db9e8",originX:"center",originY:"center",selectable:!1}),o=r(e),n=new fabric.Group([t,o],{selectable:!1});d.add(n),d.renderAll()}function r(e){var r=15,t=e[0],o=e[1],n=e[2],c=e[3],a=n-t,i=c-o,g=Math.atan2(i,a);g*=180/Math.PI,g+=90;var b=new fabric.Triangle({angle:g,fill:"#207cca",top:c,left:n,height:r,width:r,originX:"center",originY:"center",selectable:!1});return b}function t(e){var r=d.getActiveObject(),t=d.getActiveGroup();if(r&&confirm("Are you sure you want to delete the selected object"))d.remove(r),c();else if(t&&confirm("Are you sure you want to delete the selected objects?")){var o=t.getObjects();d.discardActiveGroup(),o.forEach(function(e){d.remove(e)}),c()}else e||alert("There are no objects selected")}function o(){var e=d.getObjects();e.length?confirm("Are you sure you want to delete all objects?")&&(d.clear(),c()):alert("There are no objects to delete")}function n(e){d.selection=e,d.forEachObject(function(r){r.selectable=e}),e||d.deactivateAll(),d.renderAll()}function c(){var e=JSON.stringify(d);localStorage.canvasApp=e}function a(){d.loadFromJSON(localStorage.canvasApp),d.renderAll()}var i,g,b,l,s,d=new fabric.Canvas("canvas");d.perPixelTargetFind=!0,d.targetFindTolerance=4,$("html").keyup(function(e){(46===e.keyCode||8===e.keyCode)&&t(!0)}),$(".menu").click(function(){$(".menu").removeClass("on"),$(this).addClass("on")}),$("#select").click(function(){l="select",n(!0)}),$("#draw").click(function(){l="draw",n(!1)}),$("#deleteSelected").click(function(){t()}),$("#deleteAll").click(function(){o()}),d.on("mouse:down",function(e){g=!0,b=!1;var r=d.getPointer(e.e),t=[r.x,r.y,r.x,r.y];"draw"===l&&(i=new fabric.Line(t,{strokeWidth:2,stroke:$("#colorpicker").spectrum("get"),originX:"center",originY:"center",selectable:!1}),s=!1)}),d.on("mouse:move",function(e){if(g){b=!0;var r=d.getPointer(e.e);"draw"===l&&(s||(d.add(i),s=!0),i.set({x2:r.x,y2:r.y}),d.renderAll())}}),d.on("mouse:up",function(r){if(b&&"draw"===l)i.setCoords();else if("draw"===l){var t=prompt("Add text");if(null!==t&&""!==t){var o=d.getPointer(r.e),n=new fabric.Text(t,{left:o.x-25,top:o.y-50,fontSize:20,fill:$("#colorpicker").spectrum("get"),selectable:!1});d.add(n),e([o.x-50,o.y-50,o.x-5,o.y-5])}}c(),g=!1,b=!1}),a(),$("#draw").click()}),$(document).ready(function(){$(document).unbind("keydown").bind("keydown",function(e){var r=!1;if(8===e.keyCode){var t=e.srcElement||e.target;r="INPUT"===t.tagName.toUpperCase()&&("TEXT"===t.type.toUpperCase()||"PASSWORD"===t.type.toUpperCase()||"FILE"===t.type.toUpperCase()||"SEARCH"===t.type.toUpperCase()||"EMAIL"===t.type.toUpperCase()||"NUMBER"===t.type.toUpperCase()||"DATE"===t.type.toUpperCase())||"TEXTAREA"===t.tagName.toUpperCase()?t.readOnly||t.disabled:!0}r&&e.preventDefault()}),$("#colorpicker").spectrum({color:"#f00",showInput:!0,className:"full-spectrum",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",localStorageKey:"spectrum.demo",move:function(e){},show:function(){},beforeShow:function(){},hide:function(){},change:function(){},palette:[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]]})});
//# sourceMappingURL=./main-min.js.map